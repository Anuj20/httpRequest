___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "__wm": "VGVtcGxhdGUtQXV0aG9yX1NlcnZlckNvbnRhaW5lck1vbml0b3ItU2ltby1BaGF2YQ\u003d\u003d",
  "categories": [
    "UTILITY"
  ],
  "version": 1,
  "securityGroups": [],
  "displayName": "HTTP Request  - Johan",
  "brand": {
    "id": "brand_dummy",
    "displayName": "",
    "thumbnail": "data:image/jpeg;base64,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"
  },
  "description": "Custom template for HTTP header",
  "containerContexts": [
    "SERVER"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "LABEL",
    "name": "POST request",
    "displayName": "POST request only"
  },
  {
    "type": "TEXT",
    "name": "endpoint",
    "displayName": "Endpoint",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "help": "Set the Destination URL here"
  },
  {
    "type": "GROUP",
    "name": "requestHeaders",
    "displayName": "Request Headers",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "SIMPLE_TABLE",
        "name": "reqHeaders",
        "displayName": "Add the Request Headers",
        "simpleTableColumns": [
          {
            "defaultValue": "",
            "displayName": "Key",
            "name": "key",
            "type": "TEXT"
          },
          {
            "defaultValue": "",
            "displayName": "Value",
            "name": "value",
            "type": "TEXT"
          }
        ]
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "requestBody",
    "displayName": "Request Body",
    "groupStyle": "ZIPPY_CLOSED",
    "subParams": [
      {
        "type": "SIMPLE_TABLE",
        "name": "reqBody",
        "displayName": "Add the request body",
        "simpleTableColumns": [
          {
            "defaultValue": "",
            "displayName": "Key",
            "name": "key",
            "type": "TEXT"
          },
          {
            "defaultValue": "",
            "displayName": "Value",
            "name": "value",
            "type": "TEXT"
          }
        ]
      }
    ]
  }
]


___SANDBOXED_JS_FOR_SERVER___

const getAllEventData = require('getAllEventData');
const JSON = require('JSON');
const sendHttpRequest = require('sendHttpRequest');
const logToConsole = require('logToConsole');
const getRequestHeader = require('getRequestHeader');
const traceId = getRequestHeader('trace-id');





const postHeaders = {'Content-Type': 'application/json'};

let postBodyData = {};

if (data.reqHeaders) {
    for (let key in data.reqHeaders) {
        postHeaders[data.reqHeaders[key].key] = data.reqHeaders[key].value;
    }
}

if (data.reqBody) {
    for (let key in data.reqBody) {
        postBodyData[data.reqBody[key].key] = data.reqBody[key].value;
    }
}

const postBody = JSON.stringify(postBodyData);
let requestOptions = {headers: postHeaders, method: 'POST'};

logToConsole(JSON.stringify({
        'Name': 'JsonRequest',
        'Type': 'Request',
        'TraceId': traceId,
        'RequestMethod': data.requestMethod,
        'RequestUrl': data.url,
        'RequestBody': postBodyData,
    }));

sendHttpRequest(data.endpoint, (statusCode, headers, body) => {
  //  if (isLoggingEnabled) {
        logToConsole(JSON.stringify({
            'Name': 'JsonRequest',
            'Type': 'Response',
            'TraceId': traceId,
            'ResponseStatusCode': statusCode,
            'ResponseHeaders': headers,
            'ResponseBody': body,
        }));
   // }

    if (statusCode >= 200 && statusCode < 300) {
        data.gtmOnSuccess();
    } else {
        data.gtmOnFailure();
    }
}, requestOptions, postBody);


___SERVER_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "all"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "read_event_data",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keyPatterns",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "event_name"
              }
            ]
          }
        },
        {
          "key": "eventDataAccess",
          "value": {
            "type": 1,
            "string": "specific"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "read_request",
        "versionId": "1"
      },
      "param": [
        {
          "key": "requestAccess",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "headerAccess",
          "value": {
            "type": 1,
            "string": "any"
          }
        },
        {
          "key": "queryParameterAccess",
          "value": {
            "type": 1,
            "string": "any"
          }
        }
      ]
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "send_http",
        "versionId": "1"
      },
      "param": [
        {
          "key": "allowedUrls",
          "value": {
            "type": 1,
            "string": "specific"
          }
        }
      ]
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 8/12/2020, 2:55:00 PM


